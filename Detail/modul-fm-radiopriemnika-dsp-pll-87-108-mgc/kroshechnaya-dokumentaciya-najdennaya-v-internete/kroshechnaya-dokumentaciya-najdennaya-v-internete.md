### [Крошечная документация, найденная в интернете](fm_china_at.pdf)

### Digital Stereo Radio DSP PLL FM Receiver Module 87MHz [or 76MHz]-108MHz with Serial Control

### Модуль цифрового стереорадиоприемника DSP PLL FM Receiver Module 87 МГц [или 76 МГц]-108 МГц с управлением через последовательный порт

***Особенности:***

1: Усовершенствованная цифровая обработка аудиосигнала (DSP) и FM-модуляция с фазовой блокировкой (PLL) для придания звуку большей реалистичности, длительного времени работы без смещения частоты.

2: ЖК-дисплей с интуитивно понятной информацией, очень низким энергопотреблением и минимальным уровнем шума.

3: Встроенные 30 цифровых уровней регулировки громкости позволяющие легко управлять силой звука.

4: Автоматическое сохранение настроек в памяти перед отключением питания.

5: Автоматическое переключение выхода динамика/наушников.

6: Стабилизированная частота кварцевого кристалла, не вызывающая смещения частоты при изменении температуры.

7: Автоматическое отключение звука при отсутствии FM-сигнала или слабом его уровне в течение длительного времени.

8: Цифровой инкрементальный поворотный энкодер (переключатель) для регулировки громкости и частоты, точное позиционирование и стабильность, поворот на 360° без тупиков (ограничителей).

9: Поддержка управления радиоприёмником через последовательную связь компьютером или другим устройством.

***Параметры:***

```
Выходная мощность:        500 МВт  (привод наушников), 
                          3 Вт х 2 (привод динамиков)

Диапазон звуковых частот: 50 Гц-18 кГц
Диапазон частот приема:   87,0 МГц-108,0 МГц 
Уровень сигнала:          ≥30 дБ
Напряжение питания:       3,0 В-5,0 В

Ток питания:              максимальная громкость 1000 мА, 
                          минимальная громкость 60 мА
Стерео-каналы
```

Для управления тюнером в терминальном режиме рекомендуется применять программу SSCOM. Скорость соединения – 38400 бод, остальные параметры: 8,1,N,N. 

Команды, перечень которых находится в этом документе, следует набирать только заглавными буквами в строке Data input и посылать на тюнер нажатием на кнопку SEND.

Ответ тюнера на принятую команду может быть, в свою очередь, принят вызывающим устройством, обработан какой-либо программой, и использован в этой программе в соответствии с алгоритмом ее работы.

***Питание***

Контакты печатной платы "**G**", "**+5V**" используются для подключения источника питания. Нельзя использовать импульсный источник питания без фильтра (например, зарядные устройства для мобильных телефонов и другие импульсные источники питания). Нормальное рабочее напряжение этого модуля составляет 3,0 - 5,0 В, будьте осторожны, не превышайте диапазон напряжения питания.

***Антенна***

Контакт "**ANT**" используется для подключения FM-антенны для лучшего приема FM-сигнала. Рекомендуется использовать внешнюю антенну, длина стержневой антенны - 75 см (в городе, где близко много радиостанций, можно использовать провод длиной 75 см или никакой внешней антенны не использовать, хватит того, что есть сама плата).

***Выход на наушники / динамик***

Контакты "**R**", "**G**", "**L**" для подключения наушников. Если модуль поставляется с канальным аудиоусилителем 3Вт*2, то рекомендуется использовать динамики 4Ω / 3 Вт. При подключении наушников звук автоматически переключается на канал гарнитуры, каналы динамиков автоматически отключаются.

***Порог автоматического подавления шума (Threshold)*** 

Пользователь может настроить порог автоматического шумоподавления, диапазон регулировки равен 0-20, чем выше значение, тем более ограничен диапазон шума, тем больше вероятность отключения слабого сигнала. И, наоборот.

***Примеры управления приемником на скорости передачи 38400 бод***

```
Отобразить параметры текущего состояния модуля приёмника:
    AT+RET
(возвращаются строки состояния модуля DSP PLL FM Receiver Module
в подобном виде:
/***********************************/
VOL=30                             // Уровень громкости
FRE=995                            // Частота 99.5 Мгц
CH=26                              // Воспроизводится 26 канал
CH_ALL=11                          // Количество активных каналов = 11
PLAY                               // Воспроизводится звуковой поток
BANK=20s                           // Время подсветки индикатора = 20 сек
CAMPOS_OFF                         // Закрытое кампус-радио
Audio_mode: Stereo                 // Стерео-сигнал
PCB_NUMBE:LCD_FM_RX_V2.0           // Аппаратная версия модуля
Thank you for using!
/***********************************/).

Сбросить параметры в начальные установки:
    AT+CR
(возвращается OK и устанавливаются следующие параметры:
VOL=16                             // Уровень громкости, равный 16
FRE=875                            // Частота 87.5 Мгц  
SN_OFF                             // Выключенный шумоподавитель
SN_THR=10                          // Порог срабатывания шумоподавителя = 10
BANK=20s                           // Время подсветки индикатора = 20 сек
CAMPUS_OFF;                        // Закрытое кампус-радио
установленные значения можно проверить, подав снова команду  AT+RET).

Установить частоту канала для воспроизведения 100.0 Мгц:
    AT+FRE=1000
(возвращается значение установленной частоты FRE=1000 или ERR - ошибка. 
При установленном состоянии "open campus radio" диапазон частот 76.0-108.0 Мгц;
при установленном состоянии "off campus radio" диапазон частот 87.0-108.0  Мгц).

Увеличить частоту на 0.1 Мгц:
    AT+FREU
(возвращается установившаяся частота и дополнительная информация:
FRE=1001
SCAN OK 
FRE=1001
CH=32
CH_ALL=11
После частоты 108.0 Мгц при закрытом кампус-радио устанавливается частота 87.0 Мгц).

Уменьшить частоту на 0.1 Мгц:
    AT+FRED
(возвращается установившаяся частота и дополнительная информация, как при
команде AT+FREU. После частоты 87.0 Мгц при закрытом кампус-радио
устанавливается частота 108.0 Мгц).

Временно приостановить воспроизведение / возобновить работу:
    AT+PAUS
(при подаче команды во время воспроизведения станции работа приостанавливается
и возвращается ответ  PAUS (или ERR), при повторной подаче команды запускается
радиовещание и возвращается ответ PLAY или ERR).

Установить уровень громкости в диапазоне 00 - 30:
    AT+VOL=24
(возвращается заданное значение уровня громкости VOL=24 или ERR).

Увеличить уровень громкости на 1:
    AT+VOLU
(возвращается новое установленное значение уровня громкости VOL=25 или ERR).

Уменьшить уровень звука на 1 :
    AT+VOLD
(возвращается новое установленное значение уровня громкости VOL=24 или ERR).

Установить время работы подсветки ЖК-индикатора в секундах после ее включения:
    AT+BANK=10
(возвращается новое время работы подсветки ЖК-индикатора в секундах BANK=10s
после ее включения [00-99] или ERR. Одновременно включается подсветка индикатора на заданное время).

Включить режим расширенного частотного диапазона ("открытое кампусное радио"):
    AT+CAMPUS=1
(возвращается CAMPUS_ON. Включается расширенный диапазон частот:

76.0 Мгц  - 01 канал [CH=01]
76.1 Мгц  - 02 канал 
- - -
86.8 Мгц  - 99 канал [CH=99]
86.9 Мгц  - 00 канал [CH=00]
- - -
95.8 Мгц  - 99 канал 
95.9 Мгц  - 00 канал
- - -
101.4 Мгц - 55 канал 
101.5 Мгц - 00 канал
- - -
108.0 Мгц - 65 канал [CH=65]).

Выключить режим расширенного частотного диапазона ("закрытое кампусное радио"):
    AT+CAMPUS=0
(возвращается CAMPUS_OFF и выключается расширенный диапазон частот. 
Станет так:

87.0 Мгц  - 01 канал [CH=01]
87.1 Мгц  - 02 канал 
- - -
96.8 Мгц  - 99 канал [CH=99]
96.9 Мгц  - 00 канал [CH=00]
- - -
106.8 Мгц - 99 канал 
106.9 Мгц - 00 канал
- - -
108.0 Мгц - 11 канал [CH=11]).

Включить/выключить шумоподавитель (DSP mute switch):
    AT+SN=1
    AT+SN=0
(возвращается SN _ON или SN_OFF соответственно, если эта опция реализована 
в модуле).

Установить порог срабатывания шумоподавителя (set squelch threshold = [00-20]):
    AT+SN_THR=10
(возвращается SN_THR=новое значение порога или ERR).

```

 
